webpackJsonp([4],[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var l=n(1),r=o(l),a=n(13),i=o(a),u=n(14),s=o(u),c=document.querySelector("[data-mount-custom]"),d={entityMap:{},blocks:[{key:"c1gc9",text:"You can also implement custom block types as required.",type:"terms-and-conditions",depth:0,inlineStyleRanges:[],entityRanges:[]}]},f=function(e){sessionStorage.setItem("custom:contentState",JSON.stringify(e))},p=r.default.createElement(s.default,{rawContentState:d,onSave:f,blockTypes:[{label:"H2",type:u.BLOCK_TYPE.HEADER_TWO},{label:"T&C",type:"terms-and-conditions",element:"div",className:"u-smalltext"}]});i.default.render(p,c)},,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.BLOCK_TYPE={UNSTYLED:"unstyled",HEADER_ONE:"header-one",HEADER_TWO:"header-two",HEADER_THREE:"header-three",HEADER_FOUR:"header-four",HEADER_FIVE:"header-five",HEADER_SIX:"header-six",UNORDERED_LIST_ITEM:"unordered-list-item",ORDERED_LIST_ITEM:"ordered-list-item",BLOCKQUOTE:"blockquote",CODE:"code-block",ATOMIC:"atomic"},o=t.ENTITY_TYPE={LINK:"LINK",DOCUMENT:"DOCUMENT",MODEL:"MODEL",IMAGE:"IMAGE",EMBED:"EMBED",HORIZONTAL_RULE:"HORIZONTAL_RULE"},l=t.INLINE_STYLE={BOLD:"BOLD",ITALIC:"ITALIC",CODE:"CODE",UNDERLINE:"UNDERLINE",STRIKETHROUGH:"STRIKETHROUGH"},r=t.BR_TYPE="BR",a=(t.KEY_CODES={K:75,B:66,U:85,J:74,I:73,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56},t.KEYBOARD_SHORTCUTS={});a[n.UNSTYLED]={other:"ctrl + alt + 0",macOS:"⌘ + option + 0"},a[n.HEADER_ONE]={other:"ctrl + alt + 1",macOS:"⌘ + option + 1"},a[n.HEADER_TWO]={other:"ctrl + alt + 2",macOS:"⌘ + option + 2"},a[n.HEADER_THREE]={other:"ctrl + alt + 3",macOS:"⌘ + option + 3"},a[n.HEADER_FOUR]={other:"ctrl + alt + 4",macOS:"⌘ + option + 4"},a[n.HEADER_FIVE]={other:"ctrl + alt + 5",macOS:"⌘ + option + 5"},a[n.HEADER_SIX]={other:"ctrl + alt + 6",macOS:"⌘ + option + 6"},a[n.UNORDERED_LIST_ITEM]={other:"ctrl + shift + 8",macOS:"⌘ + shift + 8"},a[n.ORDERED_LIST_ITEM]={other:"ctrl + shift + 7",macOS:"⌘ + shift + 7"},a[o.LINK]={other:"ctrl + K",macOS:"⌘ + K"},a[r]={other:"shift + enter",macOS:"shift + enter"},a[l.BOLD]={other:"ctrl + B",macOS:"⌘ + B"},a[l.ITALIC]={other:"ctrl + I",macOS:"⌘ + I"},a[l.UNDERLINE]={other:"ctrl + U",macOS:"⌘ + U"},a[l.STRIKETHROUGH]={other:"alt + shift + 5",macOS:"option + shift + 5"},t.NBSP=" ",t.HANDLED="handled",t.NOT_HANDLED="not-handled"},,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),r=o(l),a=function(e){var t=e.name,n=e.className,o=e.title;return r.default.createElement("span",{className:"icon "+t+" "+n,"aria-hidden":!o},o?r.default.createElement("span",{role:"presentation"},o):null)};a.propTypes={name:l.PropTypes.string.isRequired,className:l.PropTypes.string,title:l.PropTypes.string},a.defaultProps={className:"",title:null},t.default=a},,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(5),r=n(44),a=o(r),i=n(3);t.default={getSelectionEntity:a.default.getSelectionEntity.bind(a.default),getEntityRange:a.default.getEntityRange.bind(a.default),handleNewLine:a.default.handleNewLine.bind(a.default),addLineBreakRemovingSelection:a.default.addLineBreakRemovingSelection.bind(a.default),getSelectedBlock:a.default.getSelectedBlock.bind(a.default),getAllBlocks:a.default.getAllBlocks.bind(a.default),getSelectedEntitySelection:function(e){var t=e.getSelection(),n=e.getCurrentContent(),o=this.getSelectionEntity(e),r=this.getEntityRange(e,o),a=t.getAnchorKey(),i=n.getBlockForKey(a),u=i.getKey();return new l.SelectionState({anchorOffset:r.start,anchorKey:u,focusOffset:r.end,focusKey:u,isBackward:!1,hasFocus:t.getHasFocus()})},hasCurrentInlineStyle:function(e,t){var n=e.getCurrentInlineStyle();return n.has(t)},isSelectedBlockType:function(e,t){var n=this.getSelectedBlock(e);return n&&n.type===t},createEntity:function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"IMMUTABLE",a=e.getCurrentContent(),i=e.getSelection(),u=a.createEntity(t,r,n),s=u.getLastCreatedEntityKey(),c=void 0;c=i.isCollapsed()?l.Modifier.insertText(a,i,o,null,s):l.Modifier.replaceText(a,i,o,null,s);var d=l.EditorState.push(e,c,"insert");return d},addHorizontalRuleRemovingSelection:function(e){var t=e.getCurrentContent(),n=t.createEntity(i.ENTITY_TYPE.HORIZONTAL_RULE,"IMMUTABLE",{}),o=n.getLastCreatedEntityKey(),r=l.AtomicBlockUtils.insertAtomicBlock(e,o," ");return r},resetBlockWithType:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.getCurrentContent(),r=e.getSelection(),a=r.getStartKey(),i=o.getBlockMap(),u=i.get(a),s=u.mergeDeep(n,{type:t,data:{}}),c=o.merge({blockMap:i.set(a,s),selectionAfter:r.merge({anchorOffset:0,focusOffset:0})});return l.EditorState.push(e,c,"change-block-type")},normaliseBlockDepth:function(e,t){var n=e.getCurrentContent(),o=n.getBlockMap(),r=o.filter(function(e){return e.getDepth()>t}).map(function(e){return e.set("depth",t)});return o=o.merge(r),n=n.merge({blockMap:o}),l.EditorState.set(e,{currentContent:n})}}},,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=t.INLINE_STYLE=t.ENTITY_TYPE=t.BLOCK_TYPE=t.DraftUtils=void 0,n(37);var l=n(32),r=o(l),a=n(10),i=o(a),u=n(12),s=o(u),c=n(3);t.default=r.default,t.DraftUtils=s.default,t.BLOCK_TYPE=c.BLOCK_TYPE,t.ENTITY_TYPE=c.ENTITY_TYPE,t.INLINE_STYLE=c.INLINE_STYLE,t.Icon=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),l=n(5),r=n(3),a=l.KeyBindingUtil.hasCommandModifier,i=l.KeyBindingUtil.isOptionKeyCommand,u="test"===i({altKey:"test"});t.default={getBlockRenderMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.some(function(e){return e.type===r.BLOCK_TYPE.CODE})&&(t[r.BLOCK_TYPE.CODE]={element:"code",wrapper:l.DefaultDraftBlockRenderMap.get(r.BLOCK_TYPE.CODE).wrapper}),e.filter(function(e){return e.element}).forEach(function(e){t[e.type]={element:e.element}}),l.DefaultDraftBlockRenderMap.merge((0,o.Map)(t))},getBlockStyleFn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.filter(function(e){return e.className}).forEach(function(e){t[e.type]=e.className});var n=function(e){var n=e.getType();return t[n]||void 0};return n},getKeyBindingFn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=function(e,t){return Object.keys(t).reduce(function(n,o){return n[o]=e.some(function(e){return e.type===t[o]}),n},{})},i=o(e,r.BLOCK_TYPE),u=o(t,r.INLINE_STYLE),s=o(n,r.ENTITY_TYPE),c=function(e){if(e.shiftKey)switch(e.keyCode){case r.KEY_CODES.B:return null;case r.KEY_CODES.I:return null;case r.KEY_CODES.J:return null;case r.KEY_CODES.U:return null;case r.KEY_CODES[5]:return u.STRIKETHROUGH&&e.shiftKey&&e.altKey?r.INLINE_STYLE.STRIKETHROUGH:null;case r.KEY_CODES[7]:return i.ORDERED_LIST_ITEM&&a(e)&&e.shiftKey?r.BLOCK_TYPE.ORDERED_LIST_ITEM:null;case r.KEY_CODES[8]:return i.UNORDERED_LIST_ITEM&&a(e)&&e.shiftKey?r.BLOCK_TYPE.UNORDERED_LIST_ITEM:null}else switch(e.keyCode){case r.KEY_CODES.K:return s.LINK&&a(e)?r.ENTITY_TYPE.LINK:null;case r.KEY_CODES.B:return u.BOLD&&a(e)?r.INLINE_STYLE.BOLD:null;case r.KEY_CODES.I:return u.ITALIC&&a(e)?r.INLINE_STYLE.ITALIC:null;case r.KEY_CODES.J:return u.CODE&&a(e)?r.INLINE_STYLE.CODE:null;case r.KEY_CODES.U:return u.UNDERLINE&&a(e)?r.INLINE_STYLE.UNDERLINE:null;case r.KEY_CODES[0]:return(e.ctrlKey||e.metaKey)&&e.altKey?r.BLOCK_TYPE.UNSTYLED:null;case r.KEY_CODES[1]:return i.HEADER_ONE&&(e.ctrlKey||e.metaKey)&&e.altKey?r.BLOCK_TYPE.HEADER_ONE:null;case r.KEY_CODES[2]:return i.HEADER_TWO&&(e.ctrlKey||e.metaKey)&&e.altKey?r.BLOCK_TYPE.HEADER_TWO:null;case r.KEY_CODES[3]:return i.HEADER_THREE&&(e.ctrlKey||e.metaKey)&&e.altKey?r.BLOCK_TYPE.HEADER_THREE:null;case r.KEY_CODES[4]:return i.HEADER_FOUR&&(e.ctrlKey||e.metaKey)&&e.altKey?r.BLOCK_TYPE.HEADER_FOUR:null;case r.KEY_CODES[5]:return i.HEADER_FIVE&&(e.ctrlKey||e.metaKey)&&e.altKey?r.BLOCK_TYPE.HEADER_FIVE:null;case r.KEY_CODES[6]:return i.HEADER_SIX&&(e.ctrlKey||e.metaKey)&&e.altKey?r.BLOCK_TYPE.HEADER_SIX:null}return(0,l.getDefaultKeyBinding)(e)};return c},getKeyboardShortcut:function(e){var t=r.KEYBOARD_SHORTCUTS[e],n=u?"macOS":"other";return t?t[n]:"No keyboard shortcut"},getBeforeInputBlockType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={"* ":r.BLOCK_TYPE.UNORDERED_LIST_ITEM,"- ":r.BLOCK_TYPE.UNORDERED_LIST_ITEM,"1. ":r.BLOCK_TYPE.ORDERED_LIST_ITEM},o=n[e];return!!t.find(function(e){return e.type===o})&&o}}},,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);t.default={createEditorState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new o.CompositeDecorator(t),l=void 0;if(e&&0!==Object.keys(e).length){var r=(0,o.convertFromRaw)(e);l=o.EditorState.createWithContent(r,n)}else l=o.EditorState.createEmpty(n);return l},serialiseEditorState:function(e){var t=e.getCurrentContent(),n=(0,o.convertToRaw)(t),l=n.blocks.every(function(e){return 0===e.text.trim().length&&0===e.entityRanges.length&&0===e.inlineStyleRanges.length});return l?{}:n}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),r=o(l),a=function(){return r.default.createElement("hr",null)};t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),r=o(l),a=n(3),i=n(10),u=o(i),s=function(e){var t=e.entity,n=e.isActive,o=e.onClick,l=t.getData(),i=l.url,s=l.title,c=l.providerName,d=l.authorName,f=l.thumbnail;return r.default.createElement("div",null,r.default.createElement(u.default,{name:"icon-media",className:"RichEditor-media-icon"}),r.default.createElement("div",{className:"RichEditor-media-container",onClick:o},r.default.createElement("span",{className:"RichEditor-media-preview"},r.default.createElement("img",{src:f,alt:s}))),n?r.default.createElement("div",{className:"RichEditor-media-options"},r.default.createElement("h3",null,r.default.createElement("strong",null,s)),r.default.createElement("p",null,r.default.createElement("span",null,"URL:",a.NBSP,r.default.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},i)),r.default.createElement("br",null),r.default.createElement("span",null,"Provider:",a.NBSP),c,r.default.createElement("br",null),r.default.createElement("span",null,"Author:",a.NBSP),d)):null)};s.propTypes={entity:r.default.PropTypes.object.isRequired,isActive:r.default.PropTypes.bool.isRequired,onClick:r.default.PropTypes.func.isRequired},t.default=s},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),s=o(u),c=n(10),d=o(c),f=function(e){function t(e){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.entity,a=o.getData(),i=a.altText,u=a.alignment;return n.state={altText:i||"",alignment:u||"left"},n.changeText=n.changeText.bind(n),n.changeAlignment=n.changeAlignment.bind(n),n.onSave=n.onSave.bind(n),n.renderMediaOptions=n.renderMediaOptions.bind(n),n}return a(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.entity.getData(),n=t.altText,o=t.alignment;this.setState({altText:n||"",alignment:o||"left"})}},{key:"changeText",value:function(e){this.setState({altText:e.currentTarget.value})}},{key:"changeAlignment",value:function(e){this.setState({alignment:e.currentTarget.value})}},{key:"onSave",value:function e(){var e=this.props.onSave,t=this.state,n=t.alignment,o=t.altText;e({alignment:n,altText:o})}},{key:"renderMediaOptions",value:function(){var e=this,t=this.props,n=t.entityConfig,o=t.onCancel,l=this.state,r=l.alignment,a=l.altText,i=n.imageFormats||[];return s.default.createElement("div",{className:"RichEditor-media-options"},s.default.createElement("div",{className:"RichEditor-grid"},s.default.createElement("div",{className:"RichEditor-col"},s.default.createElement("label",{className:"u-block"},s.default.createElement("h4",null,"Alt text"),s.default.createElement("p",null,s.default.createElement("input",{type:"text",value:a,onChange:this.changeText})))),s.default.createElement("div",{className:"RichEditor-col"},s.default.createElement("h4",null,"Image alignment"),s.default.createElement("p",null,i.map(function(t){return s.default.createElement("label",{key:t.value},s.default.createElement("input",{type:"radio",value:t.value,onChange:e.changeAlignment,checked:t.value===r}),t.label)})))),s.default.createElement("p",null,s.default.createElement("button",{type:"button",className:"button button-secondary",onClick:this.onSave},"Save changes"),s.default.createElement("button",{type:"button",className:"button button-secondary no",onClick:o},"Cancel")))}},{key:"render",value:function(){var e=this.props,t=e.entity,n=e.isActive,o=e.onClick,l=t.getData(),r=l.src,a=l.alt;return s.default.createElement("div",null,s.default.createElement(d.default,{name:"icon-image",className:"RichEditor-media-icon"}),s.default.createElement("div",{onClick:o,className:"RichEditor-media-container"},s.default.createElement("span",{className:"RichEditor-media-preview"},s.default.createElement("img",{src:r,alt:a||""}))),n?this.renderMediaOptions():null)}}]),t}(u.Component);f.propTypes={entityConfig:s.default.PropTypes.object.isRequired,entity:s.default.PropTypes.object.isRequired,isActive:s.default.PropTypes.bool.isRequired,onClick:s.default.PropTypes.func.isRequired,onSave:s.default.PropTypes.func.isRequired,onCancel:s.default.PropTypes.func.isRequired},t.default=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),s=o(u),c=n(3),d=n(28),f=o(d),p=n(27),y=o(p),E=n(30),h=o(E),g={};g[c.ENTITY_TYPE.IMAGE]=f.default,g[c.ENTITY_TYPE.EMBED]=y.default;var T=function(e){function t(e){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isActive:!1},n.toggleBlock=n.toggleBlock.bind(n),n.closeBlock=n.toggleBlock.bind(n,!1),n.onClick=n.onClick.bind(n),n.onSave=n.onSave.bind(n),n}return a(t,e),i(t,[{key:"toggleBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.isActive,t=this.props.blockProps;this.setState({isActive:e}),e?t.lockEditor():t.unlockEditor()}},{key:"onClick",value:function(){this.toggleBlock()}},{key:"onSave",value:function(e){var t=this.props,n=t.block,o=t.contentState;o.mergeEntityData(n.getEntityAt(0),e),this.closeBlock()}},{key:"render",value:function(){var e=this.props.blockProps,t=this.state.isActive,n=g[e.entity.type]||h.default;return s.default.createElement("div",{className:"RichEditor-media"+(t?" RichEditor-media--open":"")},s.default.createElement(n,{entity:e.entity,entityConfig:e.entityConfig,isActive:t,onClick:this.onClick,onCancel:this.closeBlock,onSave:this.onSave}))}}]),t}(u.Component);T.propTypes={block:s.default.PropTypes.object.isRequired,contentState:s.default.PropTypes.object.isRequired,blockProps:s.default.PropTypes.object.isRequired},t.default=T},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),r=o(l),a=function(){return r.default.createElement("div",null,"Invalid component")};t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),r=o(l),a=n(10),i=o(a),u=function(e,t){t.preventDefault(),e()},s=function(e){var t=e.active,n=e.label,o=e.title,l=e.icon,a=e.onClick;return r.default.createElement("button",{className:"RichEditor-styleButton"+(t?" RichEditor-activeButton":""),type:"button",title:o,onMouseDown:u.bind(null,a)},l?r.default.createElement(i.default,{name:l}):null,n)};s.propTypes={active:r.default.PropTypes.bool,label:r.default.PropTypes.string,title:r.default.PropTypes.string,icon:r.default.PropTypes.string,onClick:r.default.PropTypes.func},s.defaultProps={active:!1,label:null,title:null,icon:null,onClick:function(){}},t.default=s},function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),s=o(u),c=n(5),d=n(3),f=n(12),p=o(f),y=n(15),E=o(y),h=n(25),g=o(h),T=n(34),m=o(T),v=n(33),b=o(v),R=n(35),S=o(R),_=n(26),O=o(_),C=n(29),k=o(C),D={rawContentState:{},onSave:function(){},enableHorizontalRule:!1,enableLineBreak:!1,stripPastedStyles:!0,entityTypes:[],blockTypes:[],inlineStyles:[],maxListNesting:1,stateSaveInterval:250},P={rawContentState:s.default.PropTypes.object,onSave:s.default.PropTypes.func,enableHorizontalRule:s.default.PropTypes.bool,enableLineBreak:s.default.PropTypes.bool,stripPastedStyles:s.default.PropTypes.bool,entityTypes:s.default.PropTypes.arrayOf(s.default.PropTypes.shape({label:s.default.PropTypes.string.isRequired,type:s.default.PropTypes.string.isRequired,icon:s.default.PropTypes.string,control:s.default.PropTypes.func.isRequired,strategy:s.default.PropTypes.func,component:s.default.PropTypes.func,imageFormats:s.default.PropTypes.arrayOf(s.default.PropTypes.shape({label:s.default.PropTypes.string.isRequired,value:s.default.PropTypes.string.isRequired}))})),blockTypes:s.default.PropTypes.arrayOf(s.default.PropTypes.shape({label:s.default.PropTypes.string.isRequired,type:s.default.PropTypes.string.isRequired,icon:s.default.PropTypes.string,element:s.default.PropTypes.string,className:s.default.PropTypes.string})),inlineStyles:s.default.PropTypes.arrayOf(s.default.PropTypes.shape({label:s.default.PropTypes.string.isRequired,type:s.default.PropTypes.string.isRequired,icon:s.default.PropTypes.string})),maxListNesting:s.default.PropTypes.number,stateSaveInterval:s.default.PropTypes.number},I=function(t){function n(e){l(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),o=e.rawContentState,a=e.entityTypes,i=a.filter(function(e){return!!e.strategy});return t.state={editorState:g.default.createEditorState(o,i),readOnly:!1,dialogOptions:null,entity:null},t.onChange=t.onChange.bind(t),t.saveState=t.saveState.bind(t),t.toggleTooltip=t.toggleTooltip.bind(t),t.toggleDialog=t.toggleDialog.bind(t),t.toggleEditor=t.toggleEditor.bind(t),t.lockEditor=t.toggleEditor.bind(t,!0),t.unlockEditor=t.toggleEditor.bind(t,!1),t.handleReturn=t.handleReturn.bind(t),t.onTab=t.onTab.bind(t),t.onMouseUp=t.onMouseUp.bind(t),t.onKeyUp=t.onKeyUp.bind(t),t.handleKeyCommand=t.handleKeyCommand.bind(t),t.handleBeforeInput=t.handleBeforeInput.bind(t),t.toggleBlockType=t.toggleBlockType.bind(t),t.toggleInlineStyle=t.toggleInlineStyle.bind(t),t.onEditEntity=t.onEditEntity.bind(t),t.onRemoveEntity=t.onRemoveEntity.bind(t),t.addHR=t.addHR.bind(t),t.addBR=t.addBR.bind(t),t.blockRenderer=t.blockRenderer.bind(t),t.onRequestDialog=t.onRequestDialog.bind(t),t.onDialogComplete=t.onDialogComplete.bind(t),t.renderDialog=t.renderDialog.bind(t),t.renderTooltip=t.renderTooltip.bind(t),t}return a(n,t),i(n,[{key:"onChange",value:function(t){var n=this,o=this.props,l=o.stateSaveInterval,r=o.maxListNesting,a=this.state.editorState,i=a.getCurrentContent(),u=t.getCurrentContent();u!==i&&"insert-fragment"===t.getLastChangeType()&&(t=p.default.normaliseBlockDepth(t,r)),this.setState({editorState:t},function(){e.clearTimeout(n.updateTimeout),n.updateTimeout=e.setTimeout(n.saveState,l)})}},{key:"saveState",value:function(){var e=this.props.onSave,t=this.state.editorState;e(g.default.serialiseEditorState(t))}},{key:"toggleEditor",value:function(e){this.setState({readOnly:e})}},{key:"toggleTooltip",value:function(e){this.setState({shouldShowTooltip:e})}},{key:"toggleDialog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.props.entityTypes,o=n.find(function(t){return t.type===e});this.setState({readOnly:!0,dialogOptions:o,entity:t})}},{key:"handleReturn",value:function(t){var n=this.props.enableLineBreak,o=this.state.editorState,l=o.getCurrentContent(),r=!1;if(t.altKey){r=!0;var a=p.default.getSelectionEntity(o);if(a){var i=l.getEntity(a).getData();i.url&&e.open(i.url)}}else{n||(t.which=0);var u=p.default.handleNewLine(o,t);u&&(r=!0,this.onChange(u))}return r}},{key:"onTab",value:function(e){var t=this.props.maxListNesting,n=this.state.editorState,o=c.RichUtils.onTab(e,n,t);return this.onChange(o),!0}},{key:"onMouseUp",value:function(e){this.tooltip=e.target.closest("[data-tooltip]"),this.toggleTooltip(!!this.tooltip)}},{key:"onKeyUp",value:function(){this.toggleTooltip(!1)}},{key:"handleKeyCommand",value:function(e){var t=this.state.editorState,n=function(e,t){return Object.keys(e).find(function(n){return e[n]===t})},o=void 0,l=!1;return n(d.ENTITY_TYPE,e)?(l=!0,this.onRequestDialog(e)):n(d.BLOCK_TYPE,e)?(l=!0,this.toggleBlockType(e)):n(d.INLINE_STYLE,e)?(l=!0,this.toggleInlineStyle(e)):(o=c.RichUtils.handleKeyCommand(t,e),o&&(l=!0,this.onChange(o))),l}},{key:"handleBeforeInput",value:function(e){var t=this.props.blockTypes,n=this.state.editorState,o=n.getSelection(),l=p.default.getSelectedBlock(n),r=l.getType(),a=E.default.getBeforeInputBlockType(""+(l.getText()[0]||"")+(l.getText()[1]||"")+e,t),i=[r!==d.BLOCK_TYPE.UNSTYLED,o.getAnchorOffset()>2,l.getLength()>2,!a];return i.some(function(e){return e})?d.NOT_HANDLED:(this.onChange(p.default.resetBlockWithType(n,a,{text:""})),d.HANDLED)}},{key:"toggleBlockType",value:function(e){var t=this.state.editorState;this.onChange(c.RichUtils.toggleBlockType(t,e))}},{key:"toggleInlineStyle",value:function(e){var t=this.state.editorState;this.onChange(c.RichUtils.toggleInlineStyle(t,e))}},{key:"onEditEntity",value:function(e){var t=this.state.editorState,n=t.getCurrentContent(),o=n.getEntity(e),l=p.default.getSelectedEntitySelection(t),r=c.EditorState.acceptSelection(t,l);this.onChange(r),this.toggleDialog(o.type,o)}},{key:"onRemoveEntity",value:function(){var e=this.state.editorState,t=p.default.getSelectedEntitySelection(e);this.setState({shouldShowTooltip:!1}),this.onChange(c.RichUtils.toggleLink(e,t,null))}},{key:"addHR",value:function(){var e=this.state.editorState;this.onChange(p.default.addHorizontalRuleRemovingSelection(e))}},{key:"addBR",value:function(){var e=this.state.editorState;this.onChange(p.default.addLineBreakRemovingSelection(e))}},{key:"blockRenderer",value:function(e){var t=this.props.entityTypes,n=this.state.editorState,o=n.getCurrentContent(),l=void 0,r=void 0,a=void 0;switch(e.getType()){case d.BLOCK_TYPE.ATOMIC:l=o.getEntity(e.getEntityAt(0)),r=l.type===d.ENTITY_TYPE.HORIZONTAL_RULE,a=r?{component:O.default,editable:!1,props:{}}:{component:k.default,editable:!1,props:{entity:l,entityConfig:t.find(function(e){return e.type===l.type}),lockEditor:this.lockEditor,unlockEditor:this.unlockEditor,editorState:n,onUpdate:this.onDialogComplete}};break;default:a=null}return a}},{key:"onRequestDialog",value:function(e){var t=this.state.editorState,n=t.getCurrentContent(),o=p.default.getSelectionEntity(t);this.toggleDialog(e,o?n.getEntity(o):null)}},{key:"onDialogComplete",value:function(t){var n=this;this.setState({dialogOptions:null},function(){t&&n.onChange(t),e.setTimeout(function(){n.setState({readOnly:!1},function(){e.setTimeout(function(){n.editorRef.focus()},0)})},0)})}},{key:"renderDialog",value:function(){var e=this.state,t=e.entity,n=e.editorState,o=e.dialogOptions,l=void 0;if(o){var r=o.control;l=s.default.createElement(r,{onClose:this.onDialogComplete,onUpdate:this.onDialogComplete,entity:t,editorState:n,options:o})}else l=null;return l}},{key:"renderTooltip",value:function(){var e=this.state,t=e.editorState,n=e.shouldShowTooltip,o=t.getCurrentContent(),l=this.tooltip&&this.tooltip.getAttribute("data-tooltip");return s.default.createElement(b.default,null,n&&l?s.default.createElement(S.default,{onRemove:this.onRemoveEntity,onEdit:this.onEditEntity.bind(this,l),entityData:o.getEntity(l).getData(),position:{top:this.tooltip.getBoundingClientRect().top+document.body.scrollTop+this.tooltip.offsetHeight,left:this.tooltip.getBoundingClientRect().left+document.body.scrollLeft}}):null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.enableHorizontalRule,o=t.enableLineBreak,l=t.stripPastedStyles,r=t.blockTypes,a=t.inlineStyles,i=t.entityTypes,u=this.state,d=u.editorState,f=u.readOnly;return s.default.createElement("div",{className:f?"editor--readonly":null,onBlur:this.saveState,onMouseUp:this.onMouseUp,onKeyUp:this.onKeyUp},s.default.createElement(m.default,{editorState:d,enableHorizontalRule:n,enableLineBreak:o,blockTypes:r,inlineStyles:a,entityTypes:i,readOnly:f,toggleBlockType:this.toggleBlockType,toggleInlineStyle:this.toggleInlineStyle,addHR:this.addHR,addBR:this.addBR,onRequestDialog:this.onRequestDialog}),s.default.createElement(c.Editor,{ref:function(t){e.editorRef=t},editorState:d,onChange:this.onChange,readOnly:f,stripPastedStyles:l,handleReturn:this.handleReturn,keyBindingFn:E.default.getKeyBindingFn(r,a,i),handleKeyCommand:this.handleKeyCommand,handleBeforeInput:this.handleBeforeInput,onTab:this.onTab,blockRendererFn:this.blockRenderer,blockRenderMap:E.default.getBlockRenderMap(r),blockStyleFn:E.default.getBlockStyleFn(r)}),this.renderTooltip(),this.renderDialog())}}]),n}(u.Component);I.propTypes=P,I.defaultProps=D,t.default=I}).call(t,function(){return this}())},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),s=o(u),c=n(13),d=o(c),f=function(e){function t(){return l(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"componentDidMount",value:function(){this.portal||(this.portal=document.createElement("div"),document.body.appendChild(this.portal)),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=this.props.children;d.default.render(s.default.createElement("div",this.props,e),this.portal)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.portal)}},{key:"render",value:function(){return null}}]),t}(s.default.Component);f.propTypes={children:s.default.PropTypes.node},f.defaultProps={children:null},t.default=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),r=o(l),a=n(12),i=o(a),u=n(31),s=o(u),c=n(3),d=n(15),f=o(d),p=function(e){var t=e.editorState,n=e.blockTypes,o=e.inlineStyles,l=e.enableHorizontalRule,a=e.enableLineBreak,u=e.entityTypes,d=e.toggleBlockType,p=e.toggleInlineStyle,y=e.addHR,E=e.addBR,h=e.onRequestDialog;return r.default.createElement("div",{className:"editor__toolbar",role:"toolbar"},n.map(function(e){return r.default.createElement(s.default,{key:e.type,active:i.default.isSelectedBlockType(t,e.type),label:e.label,title:f.default.getKeyboardShortcut(e.type),icon:e.icon,onClick:d.bind(null,e.type)})}),o.map(function(e){return r.default.createElement(s.default,{key:e.type,active:i.default.hasCurrentInlineStyle(t,e.type),label:e.label,title:f.default.getKeyboardShortcut(e.type),icon:e.icon,onClick:p.bind(null,e.type)})}),l?r.default.createElement(s.default,{onClick:y,label:"HR"}):null,a?r.default.createElement(s.default,{onClick:E,label:"BR",title:f.default.getKeyboardShortcut(c.BR_TYPE)}):null,u.map(function(e){return r.default.createElement(s.default,{key:e.type,onClick:h.bind(null,e.type),label:e.label,title:f.default.getKeyboardShortcut(e.type),icon:e.icon})}))};p.propTypes={editorState:r.default.PropTypes.object.isRequired,enableHorizontalRule:r.default.PropTypes.bool.isRequired,enableLineBreak:r.default.PropTypes.bool.isRequired,entityTypes:r.default.PropTypes.array.isRequired,blockTypes:r.default.PropTypes.array.isRequired,inlineStyles:r.default.PropTypes.array.isRequired,toggleBlockType:r.default.PropTypes.func.isRequired,toggleInlineStyle:r.default.PropTypes.func.isRequired,addHR:r.default.PropTypes.func.isRequired,addBR:r.default.PropTypes.func.isRequired,onRequestDialog:r.default.PropTypes.func.isRequired},t.default=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),r=o(l),a=n(36),i=function(e){var t=e.position,n=e.entityData,o=e.onEdit,l=e.onRemove;return r.default.createElement("div",{style:{top:t.top,left:t.left},className:"RichEditor-tooltip",role:"tooltip"},n.url?r.default.createElement("a",{href:n.url,target:"_blank",
rel:"noopener noreferrer",className:"RichEditor-tooltip__link"},(0,a.truncateURL)(n.url)):null,n.label?r.default.createElement("span",{className:"RichEditor-tooltip__text"},(0,a.truncateURL)(n.label)):null,r.default.createElement("button",{className:"RichEditor-tooltip__button",onClick:o},"Edit"),r.default.createElement("button",{className:"RichEditor-tooltip__button",onClick:l},"Remove"))};i.propTypes={position:r.default.PropTypes.shape({top:r.default.PropTypes.number.isRequired,left:r.default.PropTypes.number.isRequired}).isRequired,entityData:r.default.PropTypes.object.isRequired,onEdit:r.default.PropTypes.func.isRequired,onRemove:r.default.PropTypes.func.isRequired},t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[" ","/","&"],l=.8*t,r=n?e.split("").reverse().join(""):e,a="",i=void 0;for(i=0;i<t-1&&(a+=r[i],!(i>=l&&o.indexOf(r[i])>=0));i++);return n?a.split("").reverse().join(""):a};t.truncateURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,o=t/2,l=e.replace("http://","").replace("https://","");if(e.length>t){var r=n(l,o,!1),a=n(l,o,!0);l=r+"…"+a}return l}},function(e,t){"use strict";window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),o=this;do for(t=n.length;--t>=0&&n.item(t)!==o;);while(t<0&&(o=o.parentElement));return o})}]);